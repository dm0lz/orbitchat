(this.webpackJsonporbitchat=this.webpackJsonporbitchat||[]).push([[0],{1088:function(e,t){},1130:function(e,t){},1143:function(e,t){},116:function(e,t,n){e.exports={delete:"Chat_delete__3vqd9",alignRight:"Chat_alignRight__3DVpy",alignRightMobile:"Chat_alignRightMobile__1Wqju",alignLeft:"Chat_alignLeft__qJ4ES",containerWrapper:"Chat_containerWrapper__ZFsr0",textRight:"Chat_textRight__MP8aq"}},1197:function(e,t){},1350:function(e,t){},1373:function(e,t){},1413:function(e,t){},1415:function(e,t){},1474:function(e,t){},1555:function(e,t,n){},1557:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),c=n(216),s=n.n(c),i=(n(618),n(0)),u=n.n(i),o=n(21),d=n(603),l=n(604),b=n(613),f=n(612),p=n(95),j=n(45),h=n(40),m=n(59),v=n(54);function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var O=Object(v.b)("counter/fetchCount",function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g=Object(v.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(O.pending,(function(e){e.status="loading"})).addCase(O.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),w=g.actions,y=w.increment,k=w.decrement,N=w.incrementByAmount,C=function(e){return e.counter.value},S=g.reducer,_=n(73),D=n.n(_),E=n(6);function I(){var e=Object(h.d)(C),t=Object(h.c)(),n=Object(r.useState)("2"),a=Object(m.a)(n,2),c=a[0],s=a[1],i=Number(c)||0;return Object(E.jsxs)("div",{children:[Object(E.jsxs)("div",{className:D.a.row,children:[Object(E.jsx)("button",{className:D.a.button,"aria-label":"Decrement value",onClick:function(){return t(k())},children:"-"}),Object(E.jsx)("span",{className:D.a.value,children:e}),Object(E.jsx)("button",{className:D.a.button,"aria-label":"Increment value",onClick:function(){return t(y())},children:"+"})]}),Object(E.jsxs)("div",{className:D.a.row,children:[Object(E.jsx)("input",{className:D.a.textbox,"aria-label":"Set increment amount",value:c,onChange:function(e){return s(e.target.value)}}),Object(E.jsx)("button",{className:D.a.button,onClick:function(){return t(N(i))},children:"Add Amount"}),Object(E.jsx)("button",{className:D.a.asyncButton,onClick:function(){return t(O(i))},children:"Add Async"}),Object(E.jsx)("button",{className:D.a.button,onClick:function(){return t((e=i,function(t,n){C(n())%2===1&&t(N(e))}));var e},children:"Add If Odd"})]})]})}var R,A,P,U,M=n(170),T=n(94),B=n(72),F=n(328),L=n(171),W=n(329),J=n.n(W),V=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:return n=t.iterator({limit:-1,reverse:!1}).collect().map((function(e){return{hash:e.hash,message:e.payload.value.message,username:e.payload.value.username,timestamp:e.payload.value.timestamp}})),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Date.now(),r=t.message,a=t.username,e.prev=2,e.next=5,t.orbit.add({message:r,username:a,timestamp:n});case 5:return c=e.sent,e.abrupt("return",{message:r,username:a,hash:c,timestamp:n});case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.orbit.remove(t.hash);case 2:return e.abrupt("return",t.hash);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=Object(v.b)("chat/fetchMessages",function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),X=Object(v.b)("chat/addMessage",function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),G=Object(v.b)("chat/removeMessage",function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H({orbit:t.orbit,hash:t.hash});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),K=Object(v.c)({name:"chat",initialState:{messages:[],status:"idle",peers:[],events:[]},reducers:{addEvent:function(e,t){e.events.unshift(t.payload)},addPeer:function(e,t){e.peers=Object(B.a)(new Set([].concat(Object(B.a)(e.peers),[t.payload])))},removePeer:function(e,t){e.peers=e.peers.filter((function(e){return e!==t.payload}))},updatePeers:function(e,t){e.peers=e.peers.filter((function(e){return t.payload.includes(e)}))}},extraReducers:function(e){e.addCase(X.pending,(function(e){e.status="loading"})).addCase(X.fulfilled,(function(e,t){e.status="idle",e.messages.push(t.payload)})).addCase(G.pending,(function(e){e.status="loading"})).addCase(G.fulfilled,(function(e,t){e.status="idle",e.messages=e.messages.filter((function(e){return e.hash!==t.payload}))})).addCase(q.pending,(function(e){e.status="loading"})).addCase(q.fulfilled,(function(e,t){e.status="idle",e.messages=t.payload}))}}),Y=K.actions,Z=Y.addPeer,$=(Y.updatePeers,Y.removePeer),Q=Y.addEvent,ee=function(e){return e.chat.messages},te=K.reducer,ne=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:return n=t.iterator({limit:-1,reverse:!0}).collect().map((function(e){return{hash:e.hash,peerId:e.payload.value.peerId,username:e.payload.value.username,timestamp:e.payload.value.timestamp}})),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r,a,c,s,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Date.now(),r=t.orbit,a=r.usersDb,c=r.ipfs,s=t.username,e.next=5,c.id();case 5:return i=e.sent,e.prev=6,e.next=9,a.add({peerId:i.id,username:s,timestamp:n});case 9:return o=e.sent,e.abrupt("return",{hash:o,peerId:i.id,username:s,timestamp:n});case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.orbit.remove(t.hash);case 2:return e.abrupt("return",t.hash);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=Object(v.b)("login/fetchUsers",function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),se=Object(v.b)("login/createUser",function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r,a,c,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne(t.orbit.usersDb);case 3:return r=e.sent,n.dispatch(le(r)),a=r.find((function(e){return e.username===t.username})),e.next=8,t.orbit.ipfs.id();case 8:if(c=e.sent,!a){e.next=18;break}if(a.peerId!==c.id){e.next=14;break}return e.abrupt("return",{username:a.username});case 14:return n.dispatch(de("Username already exists")),e.abrupt("return",{username:""});case 16:e.next=27;break;case 18:if(!(s=r.find((function(e){return e.peerId===c.id})))){e.next=23;break}return e.abrupt("return",{username:s.username});case 23:return e.next=25,re(t);case 25:return i=e.sent,e.abrupt("return",i);case 27:e.next=32;break;case 29:return e.prev=29,e.t0=e.catch(0),e.abrupt("return",n.dispatch(de(e.t0.message)));case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t,n){return e.apply(this,arguments)}}()),ie=Object(v.b)("login/destroyUser",function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ue=Object(v.c)({name:"login",initialState:{username:"",errors:[],status:"idle",users:[]},reducers:{usernameError:function(e,t){null===t.payload?e.errors=[]:e.errors=Object(B.a)(new Set([].concat(Object(B.a)(e.errors),[t.payload])))},usersFetched:function(e,t){e.users=t.payload},loadingStatus:function(e,t){e.status=t.payload}},extraReducers:function(e){e.addCase(se.pending,(function(e){e.status="loading"})).addCase(se.fulfilled,(function(e,t){e.status="idle",t.payload.username&&(e.username=t.payload.username)})).addCase(ce.pending,(function(e){e.status="loading"})).addCase(ce.fulfilled,(function(e,t){e.status="idle",e.users=t.payload}))}}),oe=ue.actions,de=oe.usernameError,le=oe.usersFetched,be=oe.loadingStatus,fe=function(e){return e.login.username},pe=ue.reducer,je=n(116),he=n.n(je),me=n(605),ve=n.n(me),xe=Object(v.c)({name:"crypto",initialState:{username:"",aavePrice:200,ethPrice:2e3,btcPrice:3e4},reducers:{newTicker:function(e,t){switch(t.payload.product_id){case"BTC-USD":e.btcPrice=t.payload.price;break;case"ETH-USD":e.ethPrice=t.payload.price;break;case"AAVE-USD":e.aavePrice=t.payload.price;break;default:console.log(t.payload)}}}}),Oe=xe.actions.newTicker,ge=xe.reducer,we=Object(v.a)({reducer:{counter:S,chat:te,login:pe,crypto:ge}}),ye=n(606);function ke(){var e=Object(ye.useStopwatch)({autoStart:!0}),t=e.seconds,n=e.minutes;e.hours,e.days,e.isRunning,e.start,e.pause,e.reset;return Object(E.jsx)("span",{style:{},children:Object(E.jsxs)("span",{style:{},children:[Object(E.jsxs)("span",{children:["Waiting for peers ",n]}),":",Object(E.jsx)("span",{children:t})]})})}function Ne(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var Ce=L.a.div(R||(R=Object(M.a)(["\n  max-height: 450px;\n  overflow-y: scroll;\n"]))),Se=L.a.div(A||(A=Object(M.a)(["\n  position: fixed;\n  bottom: 40px;\n  width: 75%;\n  background-color: #f4f5fb;\n  @media (max-width: 660px) {\n    width: 96%;\n  }\n"]))),_e=L.a.img(P||(P=Object(M.a)(["\n  width: 50px;\n  border-radius: 30px;\n"]))),De=L.a.div(U||(U=Object(M.a)(["\n  position: absolute;\n  left: 20px;\n  bottom: 9px;\n"])));function Ee(e){var t=Object(r.useState)(""),n=Object(m.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),i=Object(m.a)(s,2),d=i[0],l=i[1],b=Object(r.useState)([]),f=Object(m.a)(b,2),p=f[0],v=f[1],x=function(){var e=Object(r.useState)(Ne()),t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(){a(Ne())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}().width,O=Object(r.useRef)(null),g=Object(r.useRef)(null),w=Object(r.useRef)(null),y=Object(r.useRef)([]),k=Object(h.c)(),N=Object(j.f)(),C=Object(h.d)(ee),S=Object(h.d)(fe),_=Object(h.d)((function(e){return e.login.users})),D=Object(h.d)((function(e){return e.chat.peers})),I=Object(h.d)((function(e){return e.chat.events})),R=D.map((function(e){return _.find((function(t){return t.peerId===e}))})),A=function(e,t){var n,r=(n="peerId",t.reduce((function(e,t){return Object(F.a)(Object(F.a)({},e),{},Object(T.a)({},t[n],[].concat(Object(B.a)(e[t[n]]||[]),[t])))}),{}));return e.map((function(e){return r[e.peerId]&&"FOCUS_IN"===r[e.peerId][0].event?e.username:null})).filter((function(e){return e}))}(R=R.filter((function(e){return e})),I),P=Object(e.orbit),U=P.messagesDb,M=P.usersDb,L=P.ipfs;window.store=we,window.addMessage=X,window.orbit=e.orbit,window.rtcPeerConnections=p,window.webrtcRoom=w,window.onbeforeunload=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.current.leave();case 2:return e.next=4,w.current.leave();case 4:return e.abrupt("return",p.map((function(e){return e.pc.close()})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(r.useEffect)((function(){te()}),[C]),Object(r.useEffect)((function(){l(x<1200)}),[x]),Object(r.useEffect)((function(){S.length||N.push("/")}),[S]),Object(r.useEffect)((function(){M&&0!==Object.keys(M).length&&(k(ce(M)),M.events.on("replicated",(function(e){k(ce(M))})))}),[M]),Object(r.useEffect)((function(){U&&0!==Object.keys(U).length&&(k(q(U)),U.events.on("replicated",(function(e){k(q(U))})))}),[U]),Object(r.useEffect)((function(){return L&&0!==Object.keys(L).length&&(w.current=new J.a(L,"orbit-chat-webrtc"),g.current=new J.a(L,"orbit-chat-event"),g.current.on("peer joined",function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(Z(t)),k(ce(M)),n=V(t),p.find((function(e){return e.peerId===n.peerId}))||v((function(e){return[].concat(Object(B.a)(e),[n])}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g.current.on("peer left",(function(e){k($(e)),v((function(t){return t.filter((function(t){return t.peerId!==e}))}))})),g.current.on("message",(function(e){var t={event:e.data.toString(),peerId:e.from};k(Q(t))}))),Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.current){e.next=3;break}return e.next=3,g.current.leave();case 3:if(!w.current){e.next=6;break}return e.next=6,w.current.leave();case 6:return e.abrupt("return",p.map((function(e){return e.pc.close()})));case 7:case"end":return e.stop()}}),e)})))}),[L]),Object(r.useEffect)((function(){var e;null===(e=w.current)||void 0===e||e.on("message",W)}),[p]);var W=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r,a,c,s,i,o,d,l,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.find((function(e){return e.peerId===t.from}))){e.next=3;break}return e.abrupt("return");case 3:return r=n.pc,a=JSON.parse(t.data.toString()),c=a.desc,s=a.candidate,i=a.user,o=a.from,d=a.to,e.next=8,L.id();case 8:if(e.sent.id===d){e.next=11;break}return e.abrupt("return");case 11:if(i!==S){e.next=13;break}return e.abrupt("return");case 13:if(e.prev=13,!c){e.next=39;break}if("offer"!==c.type){e.next=30;break}return c={type:"offer",sdp:atob(c.sdp)},e.next=19,r.setRemoteDescription(c);case 19:return e.next=21,r.createAnswer();case 21:return l=e.sent,e.next=24,r.setLocalDescription(l);case 24:return e.next=26,H(r.localDescription.sdp,"answer",o);case 26:b=e.sent,w.current.broadcast(b),e.next=37;break;case 30:if("answer"!==c.type){e.next=36;break}return c={type:"answer",sdp:atob(c.sdp)},e.next=34,r.setRemoteDescription(new RTCSessionDescription(c));case 34:e.next=37;break;case 36:console.log("Unsupported SDP type.");case 37:e.next=42;break;case 39:if(!s){e.next=42;break}return e.next=42,r.addIceCandidate(new RTCIceCandidate(s));case 42:e.next=47;break;case 44:e.prev=44,e.t0=e.catch(13),console.error(e.t0);case 47:case"end":return e.stop()}}),e,null,[[13,44]])})));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.services.mozilla.com"}]});return t.onicecandidate=function(){var t=Object(o.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.candidate){t.next=5;break}return t.next=3,L.id();case 3:r=t.sent,w.current.broadcast(JSON.stringify({candidate:n.candidate,user:S,from:r.id,to:e}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.ontrack=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y.current.find((function(e){var n;return(null===(n=e.srcObject)||void 0===n?void 0:n.id)===t.streams[0].id}))){e.next=3;break}return e.abrupt("return");case 3:if(!(n=y.current.filter((function(e){return null===e.srcObject}))).length){e.next=9;break}if(n[0].srcObject=t.streams[0],!n[0].paused){e.next=9;break}return e.next=9,n[0].play();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.onnegotiationneeded=function(){var n=Object(o.a)(u.a.mark((function n(r){var a,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.createOffer();case 2:return a=n.sent,n.next=5,t.setLocalDescription(a);case 5:return n.next=7,H(t.localDescription.sdp,"offer",e);case 7:c=n.sent,w.current.broadcast(c);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),{peerId:e,pc:t}},z=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 2:t=e.sent,p.forEach((function(e){t.getTracks().forEach((function(n){return e.pc.addTrack(n,t)}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(o.a)(u.a.mark((function e(t,n,r){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.id();case 2:return a=e.sent,c={desc:{type:n,sdp:btoa(t)},user:S,from:a.id,to:r},e.abrupt("return",JSON.stringify(c));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();window.encodeSdp=H;var K=function(e){var t=new Date(parseInt(e));return ve()(t).startOf("second").fromNow()},Y=function(e){k(G({hash:e.target.getAttribute("hash"),orbit:U}))},te=function(){var e;null===(e=O.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},ne=function(e){if(null!==e){var t=e.getAttribute("peerid");y.current.find((function(e){return e.getAttribute("peerid")===t}))||(y.current=[].concat(Object(B.a)(y.current),[e]))}},re=C.slice().sort((function(e,t){return e.timestamp-t.timestamp}));return Object(E.jsx)("div",{className:"container ".concat(he.a.containerWrapper),children:Object(E.jsxs)("div",{className:"row",children:[Object(E.jsx)("div",{className:"col-sm-2 col-md-1"}),Object(E.jsxs)("div",{className:"col-sm-8 col-md-10",children:[p.map((function(e,t){return Object(E.jsx)("video",{autoPlay:!0,controls:!0,playsInline:!0,muted:!0,ref:ne,peerid:e.peerId,width:"150px",height:"150px"},t)})),Object(E.jsx)("button",{onClick:z,className:"btn btn-success",disabled:!D.length,children:"Stream video"}),Object(E.jsxs)("h3",{children:[S," -"," ",D.length?Object(E.jsxs)("span",{children:[D.length," connected peers :"," ",R.map((function(e){return e.username})).join(", ")]}):Object(E.jsx)(ke,{})]}),Object(E.jsxs)("div",{children:[Object(E.jsx)("br",{}),Object(E.jsxs)(Ce,{children:[re.map((function(e,t){return Object(E.jsx)("div",{children:Object(E.jsx)("div",{className:"card ".concat(d?"w-75":"w-50"," ").concat(t%2===0?d?he.a.alignRightMobile:he.a.alignRight:he.a.alignLeft," m-3"),children:Object(E.jsxs)("div",{className:"card-body ",children:[Object(E.jsxs)(De,{children:[Object(E.jsx)(_e,{src:"https://www.bootdey.com/img/Content/avatar/avatar3.png",alt:""}),Object(E.jsx)("div",{children:Object(E.jsx)("strong",{children:e.username})})]}),Object(E.jsx)("p",{className:"chat-message",children:e.message}),Object(E.jsx)("div",{className:he.a.textRight,children:K(e.timestamp)}),Object(E.jsx)("button",{onClick:Y,hash:e.hash,className:"btn btn-danger ".concat(he.a.delete),children:Object(E.jsx)("i",{className:"bi-trash",onClick:Y,hash:e.hash})})]})})},e.hash)})),Object(E.jsx)("div",{ref:O})]}),Object(E.jsx)("br",{}),Object(E.jsx)("br",{}),Object(E.jsxs)(Se,{children:[A.length?Object(E.jsxs)("p",{children:[A.join(", ")," is typing..."]}):Object(E.jsx)("br",{}),Object(E.jsx)("textarea",{type:"text",value:a,onChange:function(e){c(e.target.value)},name:"input",className:"form-control",onFocus:function(){g.current.broadcast("FOCUS_IN")},onBlur:function(){g.current.broadcast("FOCUS_OUT")}}),Object(E.jsx)("hr",{}),Object(E.jsx)("button",{onClick:function(){a.length&&S.length&&(k(X({orbit:U,message:a,username:S})),c(""))},className:"btn btn-success w-100",id:"chatSubmit",children:"Submit"})]})]})]}),Object(E.jsx)("div",{className:"col-sm-2 col-md-1"})]})})}function Ie(e){var t=Object(h.c)(),n=Object(r.useState)(""),a=Object(m.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(!1),u=Object(m.a)(i,2),o=u[0],d=u[1],l=Object(h.d)((function(e){return e.login.username})),b=Object(h.d)((function(e){return e.login.errors})),f=Object(h.d)((function(e){return e.login.status})),p=Object(j.f)(),v=e.orbit;window.destroyUser=ie,Object(r.useEffect)((function(){l.length&&p.push("/chat")}),[l]),Object(r.useEffect)((function(){o&&(t(de(null)),c.length&&(null===v||void 0===v?void 0:v.usersDb)&&t(se({username:c,orbit:v})).then((function(){p.push("/chat")})))}),[v]);return Object(E.jsx)("div",{className:"container",children:Object(E.jsxs)("div",{className:"row",children:[Object(E.jsx)("div",{className:"col-sm-4 "}),Object(E.jsxs)("div",{className:"col-sm-4 ",children:[Object(E.jsx)("h3",{children:"Enter Username"}),b.length?Object(E.jsx)("div",{className:"alert alert-danger alert-dismissible fade show",id:"alert",children:Object(E.jsx)("div",{children:b.map((function(e,t){return Object(E.jsx)("span",{children:e},t)}))})}):null,Object(E.jsx)("div",{children:Object(E.jsxs)("div",{children:[Object(E.jsx)("input",{type:"text",value:c,onChange:function(e){s(e.target.value)},className:"form-control"}),Object(E.jsx)("hr",{}),Object(E.jsx)("button",{onClick:function(){c.length&&(d(!0),(null===v||void 0===v?void 0:v.usersDb)?t(se({username:c,orbit:v})):(t(de("Loading database ...")),t(be("loading"))))},className:"btn btn-success w-100",disabled:"loading"===f,children:"Submit"})]})})]}),Object(E.jsx)("div",{className:"col-sm-4"})]})})}var Re=n(610),Ae=n.n(Re),Pe=n(332),Ue=n.n(Pe);function Me(e){var t=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}(e.price)!==e.price;return Object(E.jsx)("div",{className:"card",children:Object(E.jsxs)("div",{className:"card-body",children:[e.ticker," :"," ",Object(E.jsx)("h1",{className:t?Ue.a.red:Ue.a.black,children:e.price})]})})}function Te(e){var t=Object(h.c)(),n=Object(r.useRef)(),a=Object(h.d)((function(e){return e.crypto.aavePrice})),c=Object(h.d)((function(e){return e.crypto.btcPrice})),s=Object(h.d)((function(e){return e.crypto.ethPrice}));return Object(E.jsxs)("div",{className:"container",children:[Object(E.jsxs)("div",{className:"row pt-5",children:[Object(E.jsx)("div",{className:"col-sm-4 ",children:Object(E.jsx)(Me,{price:a,ticker:"AAVE"})}),Object(E.jsx)("div",{className:"col-sm-4 ",children:Object(E.jsx)(Me,{price:s,ticker:"ETH"})}),Object(E.jsx)("div",{className:"col-sm-4 ",children:Object(E.jsx)(Me,{price:c,ticker:"BTC"})})]}),Object(E.jsx)(Ae.a,{url:"wss://ws-feed.pro.coinbase.com",onMessage:function(e){var n=JSON.parse(e);t(Oe(n))},onOpen:function(e){n.sendMessage(JSON.stringify({type:"subscribe",channels:[{name:"ticker",product_ids:["AAVE-USD","ETH-USD","BTC-USD"]}]}))},ref:function(e){n=e}})]})}var Be=n(611),Fe=n.n(Be),Le=n(1286),We=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe.a.create({repo:"/orbitdb/orbitchat/browser/new/ipfs/0.0.3",start:!0,preload:{enabled:!0},EXPERIMENTAL:{pubsub:!0},relay:{enabled:!0,hop:{enabled:!0,active:!0}},config:{Addresses:{Swarm:["/dns4/mighty-bayou-87769.herokuapp.com/tcp/443/wss/p2p-webrtc-star/"]}}});case 3:return t=e.sent,e.next=6,Le.createInstance(t);case 6:return n=e.sent,r={accessController:{write:["*"]},replicate:!0,create:!0,sync:!0,localOnly:!1,write:["*"]},e.next=10,n.open("/orbitdb/zdpuAwNRaakdMhomxjUYWpDsU3cj3vMP5dgx1mhzvMzHBprab/orbitchat.messages",r);case 10:return a=e.sent,e.next=13,n.open("/orbitdb/zdpuB2wKeHGiVM9GK8vXeiRgadAshDbfik1yRByyAqFGu1vX4/orbitchat.users",r);case 13:return c=e.sent,e.next=16,a.load();case 16:return e.next=18,c.load();case 18:return e.abrupt("return",{messagesDb:a,usersDb:c,ipfs:t});case 21:e.prev=21,e.t0=e.catch(0),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),Je=(n(1555),function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).state={orbit:{}},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We();case 2:t=e.sent,this.setState({orbit:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsx)(p.a,{children:Object(E.jsxs)("div",{children:[Object(E.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(E.jsx)("a",{className:"navbar-brand",href:"#",children:"DCHAT"}),Object(E.jsx)("span",{className:"navbar-text",children:Object(E.jsx)(p.b,{to:"/",className:"nav-link",children:"login"})}),Object(E.jsx)("span",{className:"navbar-text",children:Object(E.jsx)(p.b,{to:"/crypto",className:"nav-link",children:"crypto"})}),Object(E.jsx)("span",{className:"navbar-text",children:Object(E.jsx)(p.b,{to:"/counter",className:"nav-link",children:"counter"})}),Object(E.jsx)("span",{className:"navbar-text",children:Object(E.jsx)(p.b,{to:"/chat",className:"nav-link",children:"chat"})})]}),Object(E.jsxs)(j.c,{children:[Object(E.jsx)(j.a,{path:"/chat",children:Object(E.jsx)(Ee,{orbit:this.state.orbit})}),Object(E.jsx)(j.a,{path:"/counter",children:Object(E.jsx)(I,{})}),Object(E.jsx)(j.a,{path:"/crypto",children:Object(E.jsx)(Te,{})}),Object(E.jsx)(j.a,{path:"/",children:Object(E.jsx)(Ie,{orbit:this.state.orbit})})]})]})})})}}]),n}(a.a.Component)),Ve=Object(h.b)((function(e){return{username:e.login.username}}),{})(Je);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(1556);s.a.render(Object(E.jsx)(a.a.StrictMode,{children:Object(E.jsx)(h.a,{store:we,children:Object(E.jsx)(Ve,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},227:function(e,t){},314:function(e,t){},332:function(e,t,n){e.exports={red:"Crypto_red__FaxjM",black:"Crypto_black__2Korf"}},618:function(e,t,n){},697:function(e,t){},698:function(e,t){},725:function(e,t){},73:function(e,t,n){e.exports={row:"Counter_row__1C_4f",value:"Counter_value__1d0te",button:"Counter_button__1xpSV",textbox:"Counter_textbox__3ODaX",asyncButton:"Counter_asyncButton__2UAr3 Counter_button__1xpSV"}},731:function(e,t){},909:function(e,t){},977:function(e,t){},979:function(e,t){}},[[1557,1,2]]]);
//# sourceMappingURL=main.86bc7bda.chunk.js.map